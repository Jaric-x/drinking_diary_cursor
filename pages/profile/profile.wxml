<!--pages/profile/profile.wxml-->
<view class="profile-page">
  
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="profile-header" style="padding-top: {{statusBarHeight}}px; height: {{totalNavHeight}}px;">
    <view class="profile-header__blur"></view>
    <view class="profile-header__content" style="height: {{navBarHeight}}px;">
      <text class="profile-header__title">æˆ‘çš„é…’åº“</text>
    </view>
  </view>

  <!-- æ»šåŠ¨å†…å®¹ -->
  <scroll-view 
    class="profile-scroll" 
    scroll-y 
    enhanced 
    show-scrollbar="{{false}}"
    enable-back-to-top
    refresher-enabled
    bindrefresherrefresh="onPullDownRefresh"
    style="top: {{totalNavHeight}}px;"
  >
    <view class="profile-content">
      
      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <view class="user-info">
        <view class="user-avatar">
          <image 
            class="user-avatar__image" 
            src="{{avatarUrl}}" 
            mode="aspectFill"
          />
        </view>
        <text class="user-name">{{userName}}</text>
      </view>

      <!-- ç»Ÿè®¡å¡ç‰‡ -->
      <view class="stats-card">
        <view class="stat-item">
          <text class="stat-icon">ğŸ·</text>
          <text class="stat-value">{{stats.totalNotes}}</text>
          <text class="stat-label">æ€»æ¯æ•°</text>
        </view>
        
        <view class="stat-divider"></view>
        
        <view class="stat-item">
          <text class="stat-icon">ğŸ’°</text>
          <text class="stat-value">Â¥{{stats.totalSpent}}</text>
          <text class="stat-label">æ€»èŠ±è´¹</text>
        </view>
        
        <view class="stat-divider"></view>
        
        <view class="stat-item">
          <text class="stat-icon">ğŸ“…</text>
          <text class="stat-value">{{stats.daysActive}}</text>
          <text class="stat-label">è®°å½•å¤©æ•°</text>
        </view>
      </view>

      <!-- ç…§ç‰‡å¢™ / ç©ºçŠ¶æ€ -->
      <view wx:if="{{isEmpty}}" class="empty-gallery">
        <text class="empty-gallery__icon">ğŸ·</text>
        <text class="empty-gallery__text">è¿˜æ²¡æœ‰è®°å½•å“¦</text>
      </view>

      <view wx:else class="photo-grid">
        <block wx:for="{{logs}}" wx:key="id">
          <view 
            class="photo-item"
            data-id="{{item.id}}"
            bindtap="onPhotoTap"
          >
            <image 
              class="photo-item__image" 
              src="{{item.imagePath || item.imageUrl}}" 
              mode="aspectFill"
              lazy-load
              binderror="onImageError"
            />
          </view>
        </block>
      </view>

      <!-- åº•éƒ¨ç•™ç™½ -->
      <view class="profile-bottom-spacer"></view>
    </view>
  </scroll-view>

</view>
